<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Canvas</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Canvas</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Canvas<span class="signature">(paneDiv, paneOb, size, margin)</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="Canvas"><span class="type-signature"></span>new Canvas<span class="signature">(paneDiv, paneOb, size, margin)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Creates an instance of Canvas. Holds stuff like the global min/max, the invisible and visible canvases, the boundary lines, and various interpolators use the ctrlInstance to get things like boundary data, and fill data when the values change use paneOb when there are needs for boundary data or filteredColData
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>paneDiv</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">Reference to the pane's div to add the canvas to</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>paneOb</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">paneOb reference for retrieving and storing data important for line paths, fills, and export of sessions</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>size</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">Size of the canvas element, will use this for both width and height</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>margin</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">Amount of white space around the drawing</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1218">line 1218</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="can"><span class="type-signature"></span>can<span class="type-signature"></span></h4>




<div class="description">
    The html canvas element that we draw on.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1232">line 1232</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="canvasHolder"><span class="type-signature"></span>canvasHolder<span class="type-signature"></span></h4>




<div class="description">
    The div element that the canvas is placed in
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1240">line 1240</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="canvasRatio"><span class="type-signature"></span>canvasRatio<span class="type-signature"></span></h4>




<div class="description">
    This is a ratio of the heightvs the width of the brain data. Helpful for determining what the maximum value of our y interpolator should be.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1509">line 1509</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="colToRegMap"><span class="type-signature"></span>colToRegMap<span class="type-signature"></span></h4>




<div class="description">
    This is the map that has red,green,blue strings as keys to look up region names. an example pair would be "15,22,180":"PL_Op_L"
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1377">line 1377</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="ctx"><span class="type-signature"></span>ctx<span class="type-signature"></span></h4>




<div class="description">
    This is the html canvas element context used for drawing lines and filling shapes on the canvas
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1310">line 1310</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="fillData"><span class="type-signature"></span>fillData<span class="type-signature"></span></h4>




<div class="description">
    This is a helper attribute that will hold the values that have passed all available filters
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1346">line 1346</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="infoHolder"><span class="type-signature"></span>infoHolder<span class="type-signature"></span></h4>




<div class="description">
    The holder for all the tooltip html elements
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1243">line 1243</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="invisican"><span class="type-signature"></span>invisican<span class="type-signature"></span></h4>




<div class="description">
    This canvas is used in ascertaining which region a mouse click has occured on. It isn't drawn to the screen, but instead has each region filled with a unique color at draw time, and the pixel value that lies under a mouse click can be used to map directly to the region name that red,green,blue pixel corresponds to in the colToRegMap attribute of the canvas.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1236">line 1236</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="invisictx"><span class="type-signature"></span>invisictx<span class="type-signature"></span></h4>




<div class="description">
    This is the drawing context for the invisible canvas
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1312">line 1312</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="margin"><span class="type-signature"></span>margin<span class="type-signature"></span></h4>




<div class="description">
    The amonut of pixels of space outside the drawing area of brain data
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1228">line 1228</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="paneDiv"><span class="type-signature"></span>paneDiv<span class="type-signature"></span></h4>




<div class="description">
    The div that the pane object owns which all the children html elements are added to
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1248">line 1248</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="paneOb"><span class="type-signature"></span>paneOb<span class="type-signature"></span></h4>




<div class="description">
    The paneOb reference to store data for canvas use and export
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1250">line 1250</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="regionSizes"><span class="type-signature"></span>regionSizes<span class="type-signature"></span></h4>




<div class="description">
    This is a list of smallest and largest values found in the x,y dimensions within the geojson data provided. This is used to scale the region coordinates to the space of the canvas
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1507">line 1507</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="regNameToValueMap"><span class="type-signature"></span>regNameToValueMap<span class="type-signature"></span></h4>




<div class="description">
    This is the region name to value map that is referenced when fill colors are being selected for a region during draw(). The region names are the keys and the numeric data of the fill column becomes the values
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1273">line 1273</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="regToColMap"><span class="type-signature"></span>regToColMap<span class="type-signature"></span></h4>




<div class="description">
    This is the inverse of the colToRegMap
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1379">line 1379</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="scanDatamax"><span class="type-signature"></span>scanDatamax<span class="type-signature"></span></h4>




<div class="description">
    This is the maximum value of the fillData for the canvas.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1521">line 1521</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="scanDatamin"><span class="type-signature"></span>scanDatamin<span class="type-signature"></span></h4>




<div class="description">
    These values are the min of the entire fillData provided to the canvas. This is used in linearly interpolating the color of the fill for a region if it has data. This is the minimum value
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1519">line 1519</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="size"><span class="type-signature"></span>size<span class="type-signature"></span></h4>




<div class="description">
    The width and length measure of the canvas size
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1230">line 1230</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="valToColInterp"><span class="type-signature"></span>valToColInterp<span class="type-signature"></span></h4>




<div class="description">
    This is the fill value to color interpolator. It converts from the min to max range a 0 to 1 value that we can pass to the color interpolator to return r,g,b values between to specific colors.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1534">line 1534</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="xinterp"><span class="type-signature"></span>xinterp<span class="type-signature"></span></h4>




<div class="description">
    This is the interpolator for converting the x coordinates of a region's boundary to the x dimension of the canvas.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1405">line 1405</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="yinterp"><span class="type-signature"></span>yinterp<span class="type-signature"></span></h4>




<div class="description">
    This is the interpolator for converting region coordinate y values to the y axis of the canvas. Don't forget that 0 is the top of the canvas which is why in the setup code the full height minus the margin is mapped to the min value of the region size
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1403">line 1403</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="calcRegionSizeGlobal"><span class="type-signature"></span>calcRegionSizeGlobal<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Figure out how much actual space the brain region data takes up. Important for setting the bounds of the interpolator that converts from region coordinate space to canvas space
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1478">line 1478</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="calcValueColMinMax"><span class="type-signature"></span>calcValueColMinMax<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Calculate the min and max of the fill column provided to the canvas class
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1517">line 1517</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="drawCanvas"><span class="type-signature"></span>drawCanvas<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    The all important drawing function. Responsible for clearing out old tooltips, generating color interpolators (gray to red + values) (blue to gray for - values). Actual lines are created by iterating over the features of the geojson slice specified by the brain view and the slider. paths are created for the visible and invisible canvases, and yellow strokes are provided for areas that are specified in the rois field on the canvas class. Fill values are linearly interpolated to the color scheme selected if the value for the specific isn't NaN.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1543">line 1543</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getPos"><span class="type-signature"></span>getPos<span class="signature">(e)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    This function converts the position x,y of a mouseclick on the visible canvas into a pixel's rgb values taken from the invisible canvas where each region has unique filling colors. This rgb string then is used to determine which region the click originated in, and an entry is added to the regions of interest (rois) attribute on the canvas class, as well as the paneOb. We then redraw to include a yellow border around the region that was clicked
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>e</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">the mouse click event</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1437">line 1437</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="init"><span class="type-signature"></span>init<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    The initialization of the canvas. Add elements like the canvas (invisible one too), textarea, and infoholders to the canvasHolder field on the class. Create listeners for events that trigger setup and draw functions to execute.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1296">line 1296</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="makeRegDataMap"><span class="type-signature"></span>makeRegDataMap<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Generate a map of region names to actual numerical values. Store the object on the paneOb as dataForPlot to use in plotting tools.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1271">line 1271</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setupCanvas"><span class="type-signature"></span>setupCanvas<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    This function determines what the final fill data should look like according to the presence or absence of FillFilters and AltFilters. Also uses this data to calculate global min and max of the fillData to use in color interpolation, and interpolators between the range of region coordinates and canvas screen space. Also Calculates the unique color set to fill in the invisible canvas for mouse queries.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1343">line 1343</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="tooltipMaker"><span class="type-signature"></span>tooltipMaker<span class="signature">(regionName, inner)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    This function generates a div element with specific innerHTML to append to the infoholder. Only happens for mouseclicks within a region to generate information about the region beneath the canvas. These tooltips disappear when no longer viewing a slice that features that region.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>regionName</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>inner</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="doc_test.js.html">doc_test.js</a>, <a href="doc_test.js.html#line1414">line 1414</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AltColumnFilters.html">AltColumnFilters</a></li><li><a href="AltHolder.html">AltHolder</a></li><li><a href="Application.html">Application</a></li><li><a href="Canvas.html">Canvas</a></li><li><a href="CtrlOp.html">CtrlOp</a></li><li><a href="divMaker.html">divMaker</a></li><li><a href="FillColFilter.html">FillColFilter</a></li><li><a href="Pane.html">Pane</a></li></ul><h3>Global</h3><ul><li><a href="global.html#color_collection">color_collection</a></li><li><a href="global.html#interpolator">interpolator</a></li><li><a href="global.html#LerpCol">LerpCol</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Thu Dec 12 2019 15:36:28 GMT-0700 (Mountain Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>